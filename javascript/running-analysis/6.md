# JavaScript执行机制深度解析——垃圾回收与四种常见内存泄露


4. JavaScript执行机制深度解析——执行上下文ES3规范和ES5规范

3. 如何创建执行环境我们现在知道每次调用函数时，javascript 引擎都会创建一个新的执行环境，而如何创建这一系列的执行环境呢，答案是执行器会分为两个阶段来完成， 分别是创建阶段和激活(执行)阶段。而即使步骤相同但是由于规范的不同，每个阶段执行的过程有很大的不同。3.1 ES3 规范创建阶段：1.创建作用域链。2.创建变量对象VO(包括参数，函数，变量)。3.确定this的值。激活/执行阶段：完成变量分配，执行代码。3.2 ES5 规范创建阶段：1.确定 this 的值。2.创建词法环境(LexicalEnvironment)。3.创建变量环境(VariableEnvironment)。激活/执行阶段：完成变量分配，执行代码。
